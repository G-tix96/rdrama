{%- import 'util/macros.html' as macros with context -%}
{%- import 'html_head.html' as html_head with context -%}
<!DOCTYPE html>
<html lang="en">
{{html_head.html_head(true, false, false, none, 'Login', '', '', false)}}
<body id="login">

<div class="container-fluid position-absolute h-100 p-0 overflow-auto">
	<div class="row no-gutters h-100">
		<div class="col-12 col-md-6 my-auto p-3">
			<div class="row justify-content-center">
				<div class="col-10 col-md-7">

					{% block content %}

					<div id="login-form">

						<h2>Welcome back.</h2>

						<p class="text-muted mb-md-5">Glad to have you back!</p>

						{% if failed %}
						<div class="alert alert-danger alert-dismissible fade show d-flex my-3" role="alert">
							<i class="fas fa-exclamation-circle my-auto"></i>
							<div>
									Incorrect username, email address, or password.
									<br>
									<a href="/forgot" class="alert-link">Forgot password?</a>
							</div>
							<button type="button" class="close" data-bs-dismiss="alert" aria-label="Close">
								<span aria-hidden="true">&times;</span>
						</button>
						</div>
						{% endif %}

						<form action="/login" method="post" class="mt-md-3" id="login">

								<label for="username" class="mt-3">Username or Email Address</label>

								<input autocomplete="off" class="form-control" id="username" aria-describedby="usernameHelp"
								type="text" name="username" required="">
								<input type="hidden" name="redirect" value="{{redirect}}">

								<label for="password" class="mt-3">Password</label>

								<input autocomplete="off" class="form-control" id="password" aria-describedby="passwordHelp"
								type="password" name="password" required="">


								<small class="d-block my-3"><a href="/forgot">Forgot password?</a></small>

								<button type="submit" class="btn btn-primary login w-100 mt-3" id="login_button">Sign In</button>

								<div class="text-center text-muted text-small mt-5 mb-3">
									Don't have an account? <a href="/signup{{'?redirect='+redirect if redirect else ''}}" class="font-weight-bold toggle-login">Sign up</a>
								</div>
						</form>
					</div>

					{% endblock %}
				</div>
			</div>
		</div>

		<div class="col-12 col-md-6 d-mob-none">
			<div class="splash-wrapper">
				<div class="splash-overlay"></div>
				<img alt="cover" loading="lazy" class="splash-img" src="{{'cover.webp' | asset_siteimg}}"></img>
			</div>
		</div>
	</div>
</div>

</body>

</html>

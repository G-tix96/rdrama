{% if not (v and v.poorcel) %}
	{% if p.award_count("haunt", v) %}
	<script src="{{'js/halloween/haunted.js' | asset}}" defer></script>
	{% endif %}

	{% if p.award_count("stab", v) and p.award_count("stab", v) <= 5 %}
	<style>
		canvas.sketch {
			opacity: calc(0.1*{{ p.award_count("stab", v) }});
		}
	</style>
	<script src="{{'js/halloween/blood.js' | asset}}" defer></script>
	{% elif p.award_count("stab", v) %}
	<style>
		canvas.sketch {
			opacity: 0.5;
		}
	</style>
	<script src="{{'js/halloween/blood.js' | asset}}" defer></script>
	{% endif %}

	{% if p.award_count("spiders", v) %}
		{% set spiders = p.award_count("spiders", v) %}

		{% for i in range(spiders) %}
			{% include "halloween/spider.html" %}
		{% endfor %}
	{% endif %}

	{% if p.award_count("fog", v) %}
	<canvas id="fog-effect" class="fog-effect"></canvas>
	<script src="{{'js/halloween/fog.js' | asset}}" defer></script>
	{% endif %}

	{% if p.award_count("flashlight", v) %}
	<style>
		:root {
			--Xpos: 50vw;
			--Ypos: 50vh;
			position: relative;
		}
		:root:before {
			content: "";
			display: block;
			width: 100%;
			height: 100%;
			position: absolute;
			pointer-events: none;
			background: radial-gradient(
				circle 20vmax at var(--Xpos) var(--Ypos),
				rgba(0,0,0,0) 0%,
				rgba(0,0,0,.5) 60%,
				rgba(0,0,0,.93) 100%
				);
			z-index: 1061;
		}
		@media (max-width: 767.98px) {
			:root::before {
				background: radial-gradient(
					circle 20em at 50% var(--Ypos),
					rgba(0,0,0,0) 0%,
					rgba(0,0,0,0) 80%,
					rgba(0,0,0,.93) 100%
				);
			}
		}
	</style>
	<script src="{{'js/halloween/flashlight.js' | asset}}" defer></script>
	{% endif %}

	{% if p.award_count("ectoplasm", v) %}
	<style>
		#banner-halloween-title {
			text-shadow: 0 0 40px #3AE63A;
			fill: #90ee90;
		}
	</style>
	{% endif %}

	{% if p.award_count("bones", v) %}
	<div id="animate"></div>
	<script src="{{'js/halloween/bones.js' | asset}}"></script>
	<script defer>
		bones({{ p.award_count("bones", v) }})
	</script>
	{% endif %}

	{% if p.award_count("pumpkin", v) %}
	{% set count = p.award_count("pumpkin", v) * 2 if p.award_count("pumpkin", v) <= 10 else 20 %}
	<div class="fall-pumpkins">
		{% for i in range(count) %}
		<div class="fall-pumpkin">
			<img src="/e/marseypumpking.webp" class="animate-spin" style="width: 40px; height: 40px;" alt="animate marsey pumpkin icon"/>
		</div>
		{% endfor %}
	</div>
	{% endif %}
{% else %}
	<style>
		.poor{
			position: fixed;
			background-repeat: no-repeat;
			width: 100%;
			height: 100%;
			pointer-events:none;
		}
	</style>
		
	{% if p.award_count("fog", v) %}
	<style>
		#fog-effect-eco{
			background-image: url(/assets/images/halloween/eco/fog.png);
			background-size: cover;
			z-index: 9998;
		}
	</style>
	<div id="fog-effect-eco" class="poor"></div>
	{% endif %}
	
	{% if p.award_count("stab", v) %}
	<style>
		#stab-effect-eco{
			background-image: url(/assets/images/halloween/eco/blood.png);
			z-index: 9997;
		}
	</style>
	<div id="stab-effect-eco" class="poor"></div>	
	{% endif %}
	
	{% if p.award_count("haunt", v) %}
	<style>
		#banner-halloween-title {opacity:0;}
		#banner-halloween-text-evil {opacity:1!important;}
	</style>
	{% endif %}
	
	<!--{% if p.award_count("bones", v) %}
	<style>
		#bones-effect-eco{
			background-image: url(/assets/images/halloween/skeletons/skeleton1.gif);
			z-index: 9998;
		}
	</style>
	<div id="bones-effect-eco" class="poor"></div>	
	{% endif %}-->
	
	{% if p.award_count("flashlight", v) %}
	<style>
		#flashlight-effect-eco{
			background-image: url(/assets/images/halloween/eco/flashlight.png);
			z-index: 9995;
			background-size: cover;
			background-position: center;
		}
	</style>
	<div id="flashlight-effect-eco" class="poor"></div>	
	{% endif %}
{% endif %}

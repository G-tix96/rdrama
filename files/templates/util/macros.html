{%- macro plural(value, suffix='s') -%}
	{%- if value != 1 -%}
		{{suffix}}
	{%- endif -%}
{%- endmacro -%}

{%- macro banner(src, href, alt, expand, class) %}
	<a href="{{href|default(src)}}" rel="nofollow noopener">
		<img onclick="{{expand|default('expandDesktopImage()')}}" class="{{class|default('site-banner')}}" alt="{{alt|default('site banner')}}" src="{{src|default(live_banner())}}">
	</a>
{% endmacro -%}

{%- macro live_banner() %}
	{% set path = "files/assets/images/" + SITE_NAME %}
	{% if not v and os_path.exists(path + "/cached.webp") %}
		{{ 'cached.webp' | asset_siteimg }}
	{% elif os_path.exists(path + "/banners") %}
		{{ random_image("banners") }}
	{% else %}
		{{ 'banner.webp' | asset_siteimg }}
	{% endif %}
{% endmacro -%}

{%- macro random_image(assetdir) %}
	{% set path = "assets/images/" + SITE_NAME + "/" + assetdir  %}
	{{ "/" + path + "/" + listdir('files/' + path)|random() + '?v=45' }}
{% endmacro -%}
